<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>control.sm package &mdash; Motulator 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="helpers module" href="helpers.html" />
    <link rel="prev" title="control.im package" href="control.im.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Motulator
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Motulator_Aalto</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="config.html">config package</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="control.html">control package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="control.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="control.im.html">control.im package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">control.sm package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="control.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.html#module-control.common">control.common module</a></li>
<li class="toctree-l3"><a class="reference internal" href="control.html#module-control">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="helpers.html">helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="model.html">model package</a></li>
<li class="toctree-l2"><a class="reference internal" href="sim.html">sim module</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Motulator</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">Motulator_Aalto</a> &raquo;</li>
          <li><a href="control.html">control package</a> &raquo;</li>
      <li>control.sm package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/control.sm.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="control-sm-package">
<h1>control.sm package<a class="headerlink" href="#control-sm-package" title="Permalink to this headline"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</section>
<section id="module-control.sm.torque">
<span id="control-sm-torque-module"></span><h2>control.sm.torque module<a class="headerlink" href="#module-control.sm.torque" title="Permalink to this headline"></a></h2>
<p>This file contains computation and plotting of torque characteristics for
synchronous machines, including the MTPA and MTPV loci. The methods can be used
to define look-up tables for control as well as to analyze the characteristics.
In this version, the magnetic saturation is omitted.</p>
<dl class="py class">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">control.sm.torque.</span></span><span class="sig-name descname"><span class="pre">TorqueCharacteristics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Computes MTPA and MTPV loci based on the motor parameters. The magnetic
saturation is omitted.</p>
<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.current">
<span class="sig-name descname"><span class="pre">current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psi_s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.current" title="Permalink to this definition"></a></dt>
<dd><p>Compute the stator current as a function of the stator flux linkage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>psi_s</strong> (<em>complex</em>) – Stator flux linkage.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>i_s</strong> – Stator current.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>complex</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.current_limit">
<span class="sig-name descname"><span class="pre">current_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.141592653589793</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.current_limit" title="Permalink to this definition"></a></dt>
<dd><p>Compute the current limit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em><em>, </em><em>optional</em>) – Current limit. The default is 1.</p></li>
<li><p><strong>gamma1</strong> (<em>float</em><em>, </em><em>optional</em>) – Starting angle in radians. The default is 0.</p></li>
<li><p><strong>gamm21</strong> (<em>float</em><em>, </em><em>optional</em>) – End angle in radians. The defauls in math.pi.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Bunch object with the following fields defined</em></p></li>
<li><p><strong>psi_s</strong> (<em>complex</em>) – Stator flux.</p></li>
<li><p><strong>i_s</strong> (<em>complex</em>) – Stator current.</p></li>
<li><p><strong>tau_m</strong> (<em>float</em>) – Electromagnetic torque.</p></li>
<li><p><strong>tau_M_vs_abs_psi_s</strong> (<em>interp1d object</em>) – Torque as a function of the flux magnitude.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.delta_at_zero_torque">
<span class="sig-name descname"><span class="pre">delta_at_zero_torque</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abs_psi_s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.delta_at_zero_torque" title="Permalink to this definition"></a></dt>
<dd><p>Compute the “nontrivial” load angle value corresponding to the zero
electromagnetic torque.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>abs_psi_s</strong> (<em>float</em>) – Stator flux magnitude.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>delta</strong> – Load angle at the zero torque.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.flux">
<span class="sig-name descname"><span class="pre">flux</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.flux" title="Permalink to this definition"></a></dt>
<dd><p>Compute the stator flux linkage as a function of the current.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>i_s</strong> (<em>complex</em>) – Stator current.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>psi_s</strong> – Stator flux linkage.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>complex</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.mtpa">
<span class="sig-name descname"><span class="pre">mtpa</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abs_i_s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.mtpa" title="Permalink to this definition"></a></dt>
<dd><p>Compute the MTPA stator current angle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>abs_i_s</strong> (<em>float</em>) – Stator current magnitude.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>beta</strong> – MTPA angle of the stator current vector.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.mtpa_locus">
<span class="sig-name descname"><span class="pre">mtpa_locus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.mtpa_locus" title="Permalink to this definition"></a></dt>
<dd><p>Compute the MTPA locus.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum stator current magnitude at which the locus is computed.
The default is 1.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Bunch object with the following fields defined</em></p></li>
<li><p><strong>psi_s</strong> (<em>complex</em>) – Stator flux.</p></li>
<li><p><strong>i_s</strong> (<em>complex</em>) – Stator current.</p></li>
<li><p><strong>tau_m</strong> (<em>float</em>) – Electromagnetic torque.</p></li>
<li><p><strong>abs_psi_s_vs_tau_M</strong> (<em>interp1d object</em>) – Stator flux magnitude as a function of the torque.</p></li>
<li><p><strong>i_sd_vs_tau_M</strong> (<em>interp1d object</em>) – d-axis current as a function of the torque.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.mtpv">
<span class="sig-name descname"><span class="pre">mtpv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abs_psi_s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.mtpv" title="Permalink to this definition"></a></dt>
<dd><p>Compute the MTPV stator flux angle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>abs_psi_s</strong> (<em>float</em>) – Stator flux magnitude.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>delta</strong> – MTPV angle of the stator flux vector.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.mtpv_and_current_limits">
<span class="sig-name descname"><span class="pre">mtpv_and_current_limits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.mtpv_and_current_limits" title="Permalink to this definition"></a></dt>
<dd><p>Merge the MTPV and current limits into a single interpolant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em><em>, </em><em>optional</em>) – Current limit. The default is 1.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Bunch object with the following fields defined</em></p></li>
<li><p><strong>tau_M_vs_abs_psi_s</strong> (<em>interp1d object</em>) – Torque as a function of the flux magnitude.</p></li>
<li><p><strong>i_sd_vs_tau_M</strong> (<em>interp1d object</em>) – d-axis current as a function of the torque.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.mtpv_current">
<span class="sig-name descname"><span class="pre">mtpv_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abs_i_s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.mtpv_current" title="Permalink to this definition"></a></dt>
<dd><p>Compute the MTPV based on the current magnitude, i.e., the intersection
of the MTPV current locus and the current limit circle. This method is
not necessary for computing the control look-up tables. It is used here
to “cut” the MTPV characteristics at the desired current. Alternatively
just a large enough maximum flux magnitude could be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>abs_i_s</strong> (<em>float</em>) – Stator current magnitude.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>i_s</strong> – MTPV stator current.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>complex</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.mtpv_locus">
<span class="sig-name descname"><span class="pre">mtpv_locus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psi_s_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.mtpv_locus" title="Permalink to this definition"></a></dt>
<dd><p>Compute the MTPV locus.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>psi_s_max</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum stator flux magnitude at which the locus is computed. The
default is 1.</p></li>
<li><p><strong>i_s_max</strong> (<em>float</em><em>, </em><em>optional</em>) – Maximum stator current magnitude at which the locus is computed.
The default is None.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Bunch object with the following fields defined</em></p></li>
<li><p><strong>psi_s</strong> (<em>complex</em>) – Stator flux.</p></li>
<li><p><strong>i_s</strong> (<em>complex</em>) – Stator current.</p></li>
<li><p><strong>tau_m</strong> (<em>float</em>) – Electromagnetic torque.</p></li>
<li><p><strong>tau_M_vs_abs_psi_s</strong> (<em>interp1d object</em>) – Torque as a function of the flux magnitude.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.plot_angle_torque">
<span class="sig-name descname"><span class="pre">plot_angle_torque</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abs_psi_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.plot_angle_torque" title="Permalink to this definition"></a></dt>
<dd><p>Plot the electromagnetic torque as a function of the load angle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abs_psi_s</strong> (<em>float</em>) – Stator flux magnitude.</p></li>
<li><p><strong>base</strong> (<em>object</em>) – Base values.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points to be evaluated. The default is 100.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.plot_current_loci">
<span class="sig-name descname"><span class="pre">plot_current_loci</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.plot_current_loci" title="Permalink to this definition"></a></dt>
<dd><p>Plot current loci using per-unit quantities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum current at which the loci are evaluated.</p></li>
<li><p><strong>base</strong> (<em>object</em>) – Base values.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points to be evaluated. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.plot_flux_loci">
<span class="sig-name descname"><span class="pre">plot_flux_loci</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.plot_flux_loci" title="Permalink to this definition"></a></dt>
<dd><p>Plot stator flux linkage loci using per-unit quantities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum current at which the loci are evaluated.</p></li>
<li><p><strong>base</strong> (<em>object</em>) – Base values.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points to be evaluated. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.plot_torque_current">
<span class="sig-name descname"><span class="pre">plot_torque_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.plot_torque_current" title="Permalink to this definition"></a></dt>
<dd><p>Plot torque vs. current characteristics using per-unit quantities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum current at which the loci are evaluated.</p></li>
<li><p><strong>base</strong> (<em>object</em>) – Base values.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points to be evaluated. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.plot_torque_flux">
<span class="sig-name descname"><span class="pre">plot_torque_flux</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.plot_torque_flux" title="Permalink to this definition"></a></dt>
<dd><p>Plot torque vs. flux magnitude characteristics using per-unit
quantities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_max</strong> (<em>float</em>) – Maximum current at which the loci are evaluated.</p></li>
<li><p><strong>base</strong> (<em>object</em>) – Base values.</p></li>
<li><p><strong>N</strong> (<em>int</em><em>, </em><em>optional</em>) – Amount of points to be evaluated. The default is 20.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.torque.TorqueCharacteristics.torque">
<span class="sig-name descname"><span class="pre">torque</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">psi_s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.torque.TorqueCharacteristics.torque" title="Permalink to this definition"></a></dt>
<dd><p>Compute the torque as a function of the stator flux linkage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>psi_s</strong> (<em>complex</em>) – Stator flux.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tau_M</strong> – Electromagnetic torque.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-control.sm.vector">
<span id="control-sm-vector-module"></span><h2>control.sm.vector module<a class="headerlink" href="#module-control.sm.vector" title="Permalink to this headline"></a></h2>
<p>This module contains vector control for PMSM drives.</p>
<dl class="py class">
<dt class="sig sig-object py" id="control.sm.vector.CurrentCtrl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">control.sm.vector.</span></span><span class="sig-name descname"><span class="pre">CurrentCtrl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.vector.CurrentCtrl" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A current controller corresponding to the paper “Flux-linkage-based current
control of saturated synchronous motors”:</p>
<blockquote>
<div><p><a class="reference external" href="https://doi.org/10.1109/TIA.2019.291925">https://doi.org/10.1109/TIA.2019.291925</a></p>
</div></blockquote>
<p>The continuous-time complex-vector design corresponding to (13) is used
here. This design could be equivalently presented as a 2DOF PI controller.
For better performance at high speeds with low sampling frequencies, the
discrete-time design in (18) is recommended.</p>
<dl class="py method">
<dt class="sig sig-object py" id="control.sm.vector.CurrentCtrl.output">
<span class="sig-name descname"><span class="pre">output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_s_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.vector.CurrentCtrl.output" title="Permalink to this definition"></a></dt>
<dd><p>Compute the unlimited voltage reference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_s_ref</strong> (<em>complex</em>) – Current reference.</p></li>
<li><p><strong>i_s</strong> (<em>complex</em>) – Measured current.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>u_s_ref</strong> (<em>complex</em>) – Unlimited voltage reference.</p></li>
<li><p><strong>e</strong> (<em>complex</em>) – Error signal (scaled, corresponds to the stator flux linkage).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.vector.CurrentCtrl.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">e</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_s_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_s_ref_lim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_m</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.vector.CurrentCtrl.update" title="Permalink to this definition"></a></dt>
<dd><p>Updates the integral state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>e</strong> (<em>complex</em>) – Error signal (scaled, corresponds to the stator flux linkage).</p></li>
<li><p><strong>u_s_ref</strong> (<em>complex</em>) – Unlimited voltage reference.</p></li>
<li><p><strong>u_s_ref_lim</strong> (<em>complex</em>) – Limited voltage reference.</p></li>
<li><p><strong>w_m</strong> (<em>float</em>) – Angular rotor speed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="control.sm.vector.CurrentRef">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">control.sm.vector.</span></span><span class="sig-name descname"><span class="pre">CurrentRef</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.vector.CurrentRef" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This reference calculation method resembles the method presented in
“Analytical design and autotuning of adaptive flux-weakening voltage
regulation loop in IPMSM drives with accurate torque regulation”:</p>
<blockquote>
<div><p><a class="reference external" href="https://doi.org/10.1109/TIA.2019.2942807">https://doi.org/10.1109/TIA.2019.2942807</a></p>
</div></blockquote>
<p>Instead of the PI controller, we use a simpler integral controller with a
constant gain. The resulting operating-point-dependent closed-loop pole
could be derived using (12) of the paper. The MTPV limit is also included
by means of limiting the reference torque and the d-axis current reference.</p>
<dl class="py method">
<dt class="sig sig-object py" id="control.sm.vector.CurrentRef.output">
<span class="sig-name descname"><span class="pre">output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tau_M_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w_m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_dc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.vector.CurrentRef.output" title="Permalink to this definition"></a></dt>
<dd><p>Compute the stator current reference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tau_M_ref</strong> (<em>float</em>) – Torque reference.</p></li>
<li><p><strong>w_m</strong> (<em>float</em>) – Rotor speed (in electrical rad/s)</p></li>
<li><p><strong>u_dc</strong> (<em>float</em>) – DC-bus voltage.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>i_s_ref</strong> (<em>complex</em>) – Stator current reference.</p></li>
<li><p><strong>tau_M</strong> (<em>float</em>) – Limited torque reference.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="control.sm.vector.CurrentRef.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tau_M</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_s_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_dc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.vector.CurrentRef.update" title="Permalink to this definition"></a></dt>
<dd><p>Field-weakening based on the unlimited reference voltage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tau_M</strong> (<em>float</em>) – Limited torque reference.</p></li>
<li><p><strong>u_s_ref</strong> (<em>complex</em>) – Unlimited stator voltage reference.</p></li>
<li><p><strong>u_dc</strong> (<em>DC-bus voltage.</em>) – float.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="control.sm.vector.SensorlessObserver">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">control.sm.vector.</span></span><span class="sig-name descname"><span class="pre">SensorlessObserver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.vector.SensorlessObserver" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A sensorless observer corresponding to the paper “Observers for sensorless
synchronous motor drives: Framework for design and analysis”:</p>
<blockquote>
<div><p><a class="reference external" href="https://doi.org/10.1109/TIA.2018.2858753">https://doi.org/10.1109/TIA.2018.2858753</a></p>
</div></blockquote>
<p>The observer gain decouples the electrical and mechanical dynamicas and
allows placing the poles of the corresponding linearized estimation
error dynamics.</p>
<dl class="py method">
<dt class="sig sig-object py" id="control.sm.vector.SensorlessObserver.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u_s</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.vector.SensorlessObserver.update" title="Permalink to this definition"></a></dt>
<dd><p>Update the states for the next sampling period.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>u_s</strong> (<em>complex</em>) – Stator voltage in estimated rotor coordinates.</p></li>
<li><p><strong>i_s</strong> (<em>complex</em>) – Stator current in estimated rotor coordinates.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="control.sm.vector.VectorCtrl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">control.sm.vector.</span></span><span class="sig-name descname"><span class="pre">VectorCtrl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">speed_ctrl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_ctrl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#control.sm.vector.VectorCtrl" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class interconnects the subsystems of the PMSM control system and
provides the interface to the solver.</p>
</dd></dl>

</section>
<section id="module-control.sm">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-control.sm" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="control.im.html" class="btn btn-neutral float-left" title="control.im package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="helpers.html" class="btn btn-neutral float-right" title="helpers module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, mhinkkan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>